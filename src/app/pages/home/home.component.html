<div class="home-container">
  <h1 class="title">Roadtrip en Toscane, tra MV ğŸ‡®ğŸ‡¹</h1>

  <div
    *ngIf="currentStageIndex === null"
    class="trip-card waiting-card"
    (swipeleft)="onSwipeLeft()"
  >
    <h2>Encore un peu de patience, le voyage va bientÃ´t commencer !</h2>
    <p class="countdown">{{ countdown }}</p>
    <p class="swipe-indicator">Mais on peut quand mÃªme en voir les Ã©tapes !</p>
    <p class="swipe-indicator">Swipe vers la droite â¡ï¸</p>

  </div>

  <div
    *ngIf="currentStageIndex !== null"
    class="trip-card {{ swipeDirection }}"
    (swipeleft)="onSwipeLeft()"
    (swiperight)="onSwipeRight()"
  >
    <h2 *ngIf="tripStages[currentStageIndex]?.train?.destination" class="city">{{ tripStages[currentStageIndex]?.ville }}
    vers {{ tripStages[currentStageIndex]?.train?.destination }} ğŸ“</h2>
    <h2 *ngIf="!tripStages[currentStageIndex]?.train?.destination" class="city">{{ tripStages[currentStageIndex]?.ville }} ğŸ“</h2>
    <p class="date">{{ tripStages[currentStageIndex]?.date | date:'EEEE d MMMM' }}</p>

    <!-- Bloc Train -->
    <div *ngIf="tripStages[currentStageIndex]?.train" class="info-section">
      <h3>ğŸš† Voyage </h3>
      <p>
        <strong>DÃ©part Ã  {{ tripStages[currentStageIndex]?.train?.heure_depart }} </strong> de
        <a (click)="openInMaps(tripStages[currentStageIndex]?.train?.adresse_gare_depart ?? '')">
          {{ tripStages[currentStageIndex]?.train?.adresse_gare_depart }}
        </a>
      </p>
      <p>
        <strong>ArrivÃ©e Ã  {{ tripStages[currentStageIndex]?.train?.heure_arrivee }} </strong> Ã 
        <a (click)="openInMaps(tripStages[currentStageIndex]?.train?.adresse_gare_arrivee ?? '')">
          {{ tripStages[currentStageIndex]?.train?.adresse_gare_arrivee }}
        </a>
      </p>
      <div *ngIf="tripStages[currentStageIndex]?.train?.docs">
        <a [href]="tripStages[currentStageIndex]?.train?.docs" target="_blank">
          ğŸ“„ Voir les billets
        </a>
      </div>
    </div>

    <div *ngIf="tripStages[currentStageIndex]?.logement" class="info-section">
      <h3>ğŸ  Logement</h3>
      <p>
        <strong>Adresse :</strong>
        <a (click)="openInMaps(tripStages[currentStageIndex]?.logement?.adresse ?? '')">
          {{ tripStages[currentStageIndex]?.logement?.adresse }}
        </a>
      </p>
      <p *ngIf="tripStages[currentStageIndex]?.logement?.heure_arrivee">ğŸ§³ Check-in: {{ tripStages[currentStageIndex]?.logement?.heure_arrivee }}</p>
      <p *ngIf="tripStages[currentStageIndex]?.logement?.heure_depart">ğŸšª Check-out: {{ tripStages[currentStageIndex]?.logement?.heure_depart }}</p>
      <div *ngIf="tripStages[currentStageIndex]?.logement?.docs">
        <a [href]="tripStages[currentStageIndex]?.logement?.docs" target="_blank">
          ğŸ“„ Voir le document
        </a>
      </div>
    </div>
  </div>
</div>
